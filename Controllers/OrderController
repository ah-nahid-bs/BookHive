using BookHive.Services.Interfaces; 

using Microsoft.AspNetCore.Authorization; 

using Microsoft.AspNetCore.Identity; 

using Microsoft.AspNetCore.Mvc; 

  

namespace BookHive.Controllers 

{ 

    [Authorize] 

    public class OrderController : Controller 

    { 

        private readonly IOrderService _orderService; 

        private readonly UserManager<ApplicationUser> _userManager; 

  

        public OrderController(IOrderService orderService, UserManager<ApplicationUser> userManager) 

        { 

            _orderService = orderService; 

            _userManager = userManager; 

        } 

  

        public async Task<IActionResult> Confirm() 

        { 

            var user = await _userManager.GetUserAsync(User); 

            var order = await _orderService.PlaceOrderAsync(user.Id); 

            return View(order); 

        } 

    } 

} 
